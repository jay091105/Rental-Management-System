{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ||\r\n  new PrismaClient({\r\n    log: [\"query\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,qKAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'crypto')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`crypto`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport Credentials from \"next-auth/providers/credentials\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport const { handlers, signIn, signOut, auth } = NextAuth({\r\n  providers: [\r\n    Credentials({\r\n      name: \"Credentials\",\r\n      credentials: {\r\n        email: { label: \"Email\", type: \"email\" },\r\n        password: { label: \"Password\", type: \"password\" },\r\n      },\r\n      async authorize(credentials) {\r\n        if (!credentials?.email || !credentials?.password) return null;\r\n\r\n        const user = await prisma.user.findUnique({\r\n          where: { email: credentials.email as string },\r\n        });\r\n\r\n        if (!user || !user.password) return null;\r\n\r\n        const isPasswordCorrect = await bcrypt.compare(\r\n          credentials.password as string,\r\n          user.password\r\n        );\r\n\r\n        if (!isPasswordCorrect) return null;\r\n\r\n        return {\r\n          id: user.id,\r\n          email: user.email,\r\n          name: user.name,\r\n          role: user.role,\r\n        };\r\n      },\r\n    }),\r\n  ],\r\n  callbacks: {\r\n    async jwt({ token, user }) {\r\n      if (user) {\r\n        token.role = (user as any).role;\r\n        token.id = user.id;\r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }) {\r\n      if (token) {\r\n        session.user.role = token.role as string;\r\n        session.user.id = token.id as string;\r\n      }\r\n      return session;\r\n    },\r\n  },\r\n  pages: {\r\n    signIn: \"/login\",\r\n  },\r\n});\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,wKAAQ,EAAC;IAC1D,WAAW;QACT,IAAA,6KAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU,OAAO;gBAE1D,MAAM,OAAO,MAAM,sIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;oBACxC,OAAO;wBAAE,OAAO,YAAY,KAAK;oBAAW;gBAC9C;gBAEA,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE,OAAO;gBAEpC,MAAM,oBAAoB,MAAM,oJAAM,CAAC,OAAO,CAC5C,YAAY,QAAQ,EACpB,KAAK,QAAQ;gBAGf,IAAI,CAAC,mBAAmB,OAAO;gBAE/B,OAAO;oBACL,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;gBAC/B,MAAM,EAAE,GAAG,KAAK,EAAE;YACpB;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,OAAO;gBACT,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;gBAC9B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;YAC5B;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;AACF"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { auth } from \"@/auth\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport default auth((req) => {\r\n  const { nextUrl } = req;\r\n  const isLoggedIn = !!req.auth;\r\n  const role = req.auth?.user?.role;\r\n\r\n  const isApiAuthRoute = nextUrl.pathname.startsWith(\"/api/auth\");\r\n  const isPublicRoute = [\"/\", \"/login\", \"/register\"].includes(nextUrl.pathname);\r\n\r\n  if (isApiAuthRoute) return;\r\n\r\n  if (isPublicRoute) {\r\n    if (isLoggedIn) {\r\n      if (role === \"ADMIN\") return NextResponse.redirect(new URL(\"/admin\", nextUrl));\r\n      if (role === \"VENDOR\") return NextResponse.redirect(new URL(\"/vendor\", nextUrl));\r\n      return NextResponse.redirect(new URL(\"/dashboard\", nextUrl));\r\n    }\r\n    return;\r\n  }\r\n\r\n  if (!isLoggedIn) {\r\n    return NextResponse.redirect(new URL(\"/login\", nextUrl));\r\n  }\r\n\r\n  // Role based protection\r\n  if (nextUrl.pathname.startsWith(\"/admin\") && role !== \"ADMIN\") {\r\n    return NextResponse.redirect(new URL(\"/dashboard\", nextUrl));\r\n  }\r\n  if (nextUrl.pathname.startsWith(\"/vendor\") && role !== \"VENDOR\") {\r\n    return NextResponse.redirect(new URL(\"/dashboard\", nextUrl));\r\n  }\r\n  if (nextUrl.pathname.startsWith(\"/customer\") && role !== \"CUSTOMER\") {\r\n    return NextResponse.redirect(new URL(\"/dashboard\", nextUrl));\r\n  }\r\n});\r\n\r\nexport const config = {\r\n  matcher: [\"/((?!api|_next/static|_next/image|favicon.ico).*)\"],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;uCAEe,IAAA,2HAAI,EAAC,CAAC;IACnB,MAAM,EAAE,OAAO,EAAE,GAAG;IACpB,MAAM,aAAa,CAAC,CAAC,IAAI,IAAI;IAC7B,MAAM,OAAO,IAAI,IAAI,EAAE,MAAM;IAE7B,MAAM,iBAAiB,QAAQ,QAAQ,CAAC,UAAU,CAAC;IACnD,MAAM,gBAAgB;QAAC;QAAK;QAAU;KAAY,CAAC,QAAQ,CAAC,QAAQ,QAAQ;IAE5E,IAAI,gBAAgB;IAEpB,IAAI,eAAe;QACjB,IAAI,YAAY;YACd,IAAI,SAAS,SAAS,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU;YACrE,IAAI,SAAS,UAAU,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,WAAW;YACvE,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc;QACrD;QACA;IACF;IAEA,IAAI,CAAC,YAAY;QACf,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU;IACjD;IAEA,wBAAwB;IACxB,IAAI,QAAQ,QAAQ,CAAC,UAAU,CAAC,aAAa,SAAS,SAAS;QAC7D,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc;IACrD;IACA,IAAI,QAAQ,QAAQ,CAAC,UAAU,CAAC,cAAc,SAAS,UAAU;QAC/D,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc;IACrD;IACA,IAAI,QAAQ,QAAQ,CAAC,UAAU,CAAC,gBAAgB,SAAS,YAAY;QACnE,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc;IACrD;AACF;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAoD;AAChE"}}]
}